<%# <h1>Restaurants#show</h1> %>
<%# <h1><%= @restaurant.name %></h1>
<%# <p><%= @restaurant.address %></p>

<%# <h2>Recommendations</h2> %>
<%# if @recommendations.any? %>
  <%# <ul> %>
    <%# @recommendations.each do |recommendation| %>
      <%# <li><%= recommendation.content %></li>
    <%# end %>
  <%# </ul> %>
<%# else %>
  <%# <p>No recommendations yet.</p> %>
<%# end %>

<div class="container my-5" style="padding-bottom: 24px;">
  <!-- Restaurant Image -->
  <div class="row mb-4">
    <div class="col text-center">
      <% if @restaurant.photos.attached? %>
        <%= image_tag @restaurant.photo,
              class: "img-fluid rounded shadow-sm",
              style: "max-height: 400px; object-fit: cover;" %>
      <% else %>
        <%= image_tag "default_avatar.png",
              class: "img-fluid rounded shadow-sm",
              style: "max-height: 400px; object-fit: cover;" %>
      <% end %>
    </div>
  </div>

  <!-- Restaurant Header -->
  <div class="row mb-4">
    <div class="col text-center">
      <h1 class="fw-bold"><%= @restaurant.name %></h1>
      <p class="text-muted fs-5">
        <i class="bi bi-geo-alt-fill me-1"></i> <%= @restaurant.address %>
      </p>
    </div>
  </div>

  <!-- Recommendations Section -->
  <div class="row">
    <div class="col-md-8 offset-md-2">
      <h3 class="mb-3 text-center">üçΩ Recommendations</h3>

      <% if @recommendations.any? %>
        <div class="list-group shadow-sm rounded">
          <% @recommendations.each do |recommendation| %>
            <div class="list-group-item list-group-item-action">
              <p class="mb-1"><%= recommendation.content %></p>
              <small class="text-muted">
                ‚Äî Recommended by <%= recommendation.user.name if recommendation.user %>
              </small>
            </div>
          <% end %>
        </div>
      <% else %>
        <p class="text-center text-muted fst-italic">No recommendations yet.</p>
      <% end %>
    </div>
  </div>
  
  <div style="width: 100%; height: 600px;"
  data-controller="map"
  data-map-markers-value="<%= @markers.to_json %>"
  data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">

  <!-- Back button -->
  <div class="row mt-5 mb-5">
    <div class="col text-center">
      <%= link_to "‚Üê Back to Restaurants", restaurants_path, class: "btn btn-outline-secondary" %>
    </div>
  </div>
</div>
