<turbo-frame id="main_content">
  <div class="profile-page container py-4">

    <div class="text-center mb-4">
      <% if user.profile_picture.attached? %>
        <%= image_tag user.profile_picture.variant(resize_to_limit: [150, 150]), alt: user.username, class: "rounded-circle mb-3 shadow-sm" %>
      <% else %>
        <%= image_tag "default_avatar.png", size: "150x150", alt: user.username, class: "rounded-circle mb-3 shadow-sm" %>
      <% end %>
      <h1 class="h3 mb-2"><%= user.username %></h1>

      <% if current_user != user %>
        <% if current_user.follows?(user) %>
          <%= button_to "Unfollow", user_unfollow_path(user), method: :delete, class: "btn btn-danger" %>
        <% else %>
          <%= button_to "Follow", user_follow_path(user), method: :post, class: "btn btn-primary" %>
        <% end %>
      <% end %>
    </div>

    <section>
      <h2 class="h4 mb-3">Recommendations</h2>
      <% if user.recommendations.any? %>
        <ul class="list-group">
          <% user.recommendations.each do |recommendation| %>
            <li class="list-group-item mb-2">
              <strong>From User ID:</strong> <%= recommendation.user_id %><br>
              <strong>Restaurant ID:</strong> <%= recommendation.restaurant_id %><br>
              <p class="mb-0"><%= recommendation.description %></p>
            </li>
          <% end %>
        </ul>
      <% else %>
        <p class="text-muted">No recommendations yet.</p>
      <% end %>
    </section>

    <div class="mt-4 text-center">
      <%= link_to "Close", root_path, data: { turbo_frame: "_top" }, class: "btn btn-secondary" %>
    </div>

  </div>
</turbo-frame>
